- 접속한 사용자의 웹소켓 세션 정보를 기반으로 메시지를 리턴하는거 아닌감?.? - 특정 인터페이스를 상속하면, 웹소켓 서버를 만들 수 있음
- 소켓 핸들러 하나가 하나의 연결을 나타냄(session 하나를 받잖아) // 세션은 사용자 각각이 가지고 있지.
- 즉, 여러개의 연결을 처리하려면 소켓 핸들러가 여러개 필요한것 // 채팅마다 user는 2명이니까 일단 두 개의  세션이 있는거네

- 또 하나의 연결은 하나의 두 끝단을 연결시키잖앙 앤드포인트, 그니까 모든 연결을? register 해줘야함.
근데 레지스터 해줄 때, 앤드 포인트가 각각 필요한것임.

- 이 앤드포인트에 연결되는 구독하는 두 유저가 있는 것
- 
- 이 앤드포인트를 유저의 번호가 아니라, 등록 채팅방의 번호로 하면 좋겠다. 
그리고 이게 알림? 이 있어야 하지 않을지. 그리고 
메시지에 확인여부가 있어야 하겠다. 보낸사람은 항상 - 확인을 한거고, 받는 사람이 확인했는지 안했는지 확인한 후에 있으면 알림 동그라미 - 보낸사람 받는사람 저장하고, 확인했는지 저장하고

마지막 접속시간이어야 하는건 아니야?
유저가 같은 채팅 앤드포인트를 구독하고 있는 것이라고 보면 된다. 


일단은 서버에서 사용자에게 알림을 줘야한다. ->
알림을 주려면, 전이중통신이 가능하도록한 프로토콜로 websocket

handshake 요청을 하는데, 이건 사용자에서 서버에게 보내는 것
일단 어떤식으로 하냐면. 접속을 할 때, 앤드포인트를 넘기면서 웹소켓 객체를 생성해. 
이 때 개인 채팅이 되려면 앤드포인트를 고유하게 가져야겠지?
(앤트포인트로 요청이 오면, 있는지 찾고, 있으면 관련된 채팅 내용을 채팅 방 안에서 찍어준다)
그 채팅방에 참여하는 사람만 사용할 수 있도록.

그럼 -채팅방을 생성하고(생성하지 않아도 됨. 고유하기만 하면된다. 그럼 채팅방 명으로 생각하고 이걸가지고 채팅방을 생성해도 됨. 상관 ㄴㄴ임) 고유 url을 가지고 일단 url을 통해 소캣 객체를 만들어.

소캣 객체를 만들고 연결이 되면,  그리고, 화면에 담아둘 때는 디자이너랑 / 사용자랑 같은 키에 넣어두고? 왔다갔다 할 때 마다 뽑아서 쓸 수 있도록 하면 되잖아.

여튼 그 다음에 연결이 되고 나면 이제 메시지가 문제인데.
uri마다? 다른 소켓이 생기는건 알겠어. 근데 이미 소켓이 있으면 어떻게 행?
노상관인가? 나는 상관 없지만
메시지가 올 때 마다, 소켓마다 send가 기능이 있음. 근데 그럼 